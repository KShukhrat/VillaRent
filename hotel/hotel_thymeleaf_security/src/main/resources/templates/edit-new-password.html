<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>New Password </title>
  <!-- Bootstrap CSS -->
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <div class="row">
          <div class="col-md-6 offset-md-3">
            <div class="card">
              <div class="card-header">
                <h5 class="card-title">New Password</h5>
              </div>
              <div class="card-body">
                <form id="userForm" method="post" action="">
                  <div class="form-group">
                    <label for="inputPas">Current Password</label>
                    <input type="password" class="form-control" id="inputPas" placeholder="Enter current password" value="" name="currentPassword">
                  </div>
                  <div class="form-group">
                    <label for="inputNewPas">New Password</label>
                    <div class="input-group">
                      <input type="password" class="form-control toggle-password" id="inputNewPas" placeholder="Enter new password" name="newPassword">
                      <div class="input-group-append">
                        <span class="input-group-text show-password-toggle"><i class="fa fa-eye" aria-hidden="true"></i></span>
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="inputNewPas2">Confirm New Password</label>
                    <div class="input-group">
                      <input type="password" class="form-control toggle-password" id="inputNewPas2" placeholder="Confirm new password" name="newPasswordConfirm">
                      <div class="input-group-append">
                        <span class="input-group-text show-password-toggle"><i class="fa fa-eye" aria-hidden="true"></i></span>
                      </div>
                    </div>
                  </div>
                  <div id="passwordCriteria" class="text-muted mb-2">New password must have at least 1 uppercase, 1 lowercase, and be at least 8 characters long.</div>
                  <button type="submit" class="btn btn-primary" id="submitButton" disabled>Save</button>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Bootstrap JS -->
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
      <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
      <script>
        var showPasswordToggles = document.querySelectorAll('.show-password-toggle');
        showPasswordToggles.forEach(function(toggle) {
          toggle.addEventListener('click', function() {
            var passwordField = toggle.closest('.input-group').querySelector('.toggle-password');
            var fieldType = passwordField.getAttribute('type');
            if (fieldType === 'password') {
              passwordField.setAttribute('type', 'text');
              toggle.innerHTML = '<i class="fa fa-eye-slash" aria-hidden="true"></i>';
            } else {
              passwordField.setAttribute('type', 'password');
              toggle.innerHTML = '<i class="fa fa-eye" aria-hidden="true"></i>';
            }
          });
        });
      
        function validatePassword() {
          var password = document.getElementById('inputNewPas').value;
          var uppercaseRegex = /[A-Z]/;
          var lowercaseRegex = /[a-z]/;
          var lengthRegex = /.{8,}/;
          var newPassword2 = document.getElementById('inputNewPas2').value;
      
          var criteriaMet = uppercaseRegex.test(password) && lowercaseRegex.test(password) && lengthRegex.test(password) && password === newPassword2;
      
          if (criteriaMet) {
            document.getElementById('passwordCriteria').innerText = 'Password meets criteria.';
            document.getElementById('submitButton').disabled = false;
          } else {
            document.getElementById('passwordCriteria').innerText = 'New password must have at least 1 uppercase, 1 lowercase, and be at least 8 characters long. Passwords must match.';
            document.getElementById('submitButton').disabled = true;
          }
        }
      
        document.getElementById('inputNewPas').addEventListener('input', validatePassword);
        document.getElementById('inputNewPas2').addEventListener('input', validatePassword);
      </script>
</body>
</html>
